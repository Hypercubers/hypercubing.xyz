# Grip theory

Grip theory is a framework for analyzing many different kinds of twisty puzzles in a geometry-independent way. It was first developed on the TwistyPuzzles Forum in about 2010 ADD LINK. Grip theory was originally used to describe doctrinaire puzzles in 3D, but it can be extended to describe bandaged puzzles, jumbling puzzles, higher-dimensional puzzles, and more.

## Basic grip theory

### Building the 3×3×3

Consider a set of 6 abstract objects, called *grips*. We will name these grips `R`, `U`, `F`, `L`, `D`, and `B`. We can define a group that acts on this set of grips, for instance, the group generated by the 4-cycles (`R`, `U`, `L`, `D`) and (`R`, `F`, `L`, `B`). These two permutations generate a group of order 24, called the *grip group*. This is equivalent to the symmetry group of the cube, where the grips correspond to the corresponding faces of the cube, but by defining this system without reference to the cube, it can be replaced with other non-geometric objects.

In grip theory, a *piece* will be defined to have two things: its *attitude*, which is an element of the grip group, and a set of *active grips*. For instance, a piece could be in the identity attitude (we call this *solved*) and have the active grip set {`R`, `U`}. There are several ways to transform a piece by rotating its attitude, and when this happens, the active grip set is defined to follow it. Thus, two pieces are defined to be equal if when you rotate the pieces' attitudes to solved, the active grips are identitcal. Thus, we can decompose the attitude into two components: the *position* of the piece, which is its current active grip set, and the *orientation* of the piece, which is its attitude modulo position.

A *twist* has two components: the grip we twist around, or *axis*, and an element of the grip group that fixes that grip, the *transformation*. To apply a twist to a piece, we first check if the grip of the twist is an active grip of the piece. If it is not, the piece remains unchanged. Otherwise, we apply the twist's transformation to the attitude of the piece. The active grip set is considered attached to the attitude and turns with it. For instance, consider the twist with axis `U` and transformation (`R`, `F`, `L`, `B`), which fixes `U`. We will apply this to the piece from above, so the attitude of the piece is changed to (`R`, `F`, `L`, `B`). In the active grip set, `U` is kept stationary, but `R` is moved to `F`, so the new active grip set is {`U`, `F`}.

We can look at the set of all possible twists. In this case, there are 6 possible axis grips, and 4 possible transformations for each axis, though one of each is the identity and will do nothing to the pieces. The set of all positions our piece can move to are all sets of two grips except {`R`, `L`}, {`U`, `D`}, and {`F`, `B`}. These exactly correspond to the edge positions of the [3×3×3](/puzzles/3x3x3.md). An edge piece is only affected by a twist if one of its colored faces is on the face corresponding to the axis of the twist, and after the twist, the positions of its colored faces moves. This is exactly the behavior of the active grips. Therefore, the piece above is an edge piece. We can similarly construct three more sets of pieces: the corners, with active grips like {`R`, `U`, `F`}, the centers, which active grips like {`R`}, and the core, with empty active grip set. Note that even though the centers have only one grip, they still have attitude, so the centers on this puzzle are actually super centers. Thus, we have built the 3×3×3.

### Complex puzzles

We do not need to be limited to the pieces that exist on the physical 3×3×3. We can take every subset of the grip set, which has $2^6 = 64$ pieces. The puzzle you get when you include all the pieces of another puzzle in this sense is called the *complex* version of that puzzle. 

The complex 3×3×3 has 10 types of pieces, which include the core, centers, edges, and corners from the 3×3×3. It also includes the axles, with active grips like {`R`, `L`}, and the bridges, with active grips like {`R`, `U`, `L`}. The other types of pieces are generated by the *anti-* automorphism of this puzzle. The anti- automorphism takes every piece with active grip set $A$ to the piece whose active grip set is $A^c$, its complement. Given a twist with axis $a$ and transformation $g$, the composition of two actions of the puzzle: the first action is a rotation of every piece by $g^{-1}$, and the second is the original twist. When viewed on an actual 3×3×3, this automorphism maps moves to wide moves of the opposite faces. The anti- version of a piece is the image of a piece under the anti- automorphism. Thus, we can call the other pieces of the complex 3×3×3 anti-edges, anti-axles, anti-centers, and the anti-core. Anti-corners and anti-bridges are isomorphic to the corners and bridges, so they do not need to be recounted.

### More puzzles

This definition is immediately generalizable by replacing the set of grips and the grip group. For instance, using 12 grips and the grip group of a dodecahedron, we can create a megaminx, and by including all pieces, we can construct the complex megaminx, which has $2^{10} = 1024$ pieces of 96 types.

We can also take 8 grips, `R`, `U`, `F`, `O`, `L`, `D`, `B`, and `I`, with the grip group being the 192 symmetries of the hypercube. This allows us to construct the [3^4^](/puzzles/3x3x3x3.md). One notable feature of this group that is not present in the previous cases is that when we take two adjacent grips (e.g. `R` and `U`), there are non-identity elements of the grip group that fix both of these, even though there are also non-identity elements that only fix one of them. This means that [RKT](/techniques/rkt.md) is possible on this puzzle.

### More layers

More layers can be added to a puzzle by adding more grips. For instance, to build a 5×5×5, we need two grips for every grip of the 3×3×3, which we can call `1R` and `2R`, and similarly for the others. The grip group will act identically on the layer-1 grips and the layer-2 grips, but will not swap them. In this way, either layer of a face of the 5×5×5 can be selected by choosing which grip on that face to use. The complex 5×5×5 can be constructed out of this grip system.

Odd-layered puzzles can be constructed like this, but even-layered puzzles are less clear. They can be constructed like the odd-layered puzzles with one more layer, but this results in identical grip systems and complex variants. Alternatively, we can use stored grips, but this results in less symmetrical puzzles.

### Group automorphisms

There are more automorphisms that these puzzles can have. An inner automorphism of the grip group, which is a conjugate by an element of the group, can be extended to an automorphism of the puzzle by interpreting the inner automorphism as a whole-puzzle rotation. More interesting is what happens when we use a non-inner automorphism. The one we choose should be realizable as conjugation by a permutation of grips, though not necessarily one in the group. We consider the 12-grip complex megaminx. The grip group of this puzzle has an outer automorphism of reflection. By applying this outer automorphism, we obtain a reflection of the whole puzzle, showing that the puzzle is not chiral, even though some pieces are. More interesting is the other outer automorphism of this group, which manifests as an exotic automorphism that takes adjacent grips on the dodecahedron to non-adjacent but non-opposite grips and vice versa. This automorphism is called the *co-* automorphism, and it shows that complex puzzles can have a higher degree of symmetry than the geometric puzzle they were based on.

In general, if we have the grip set $\Gamma$ with group $G$ acting on it, the normalizer $N_{S_\Gamma}(G)$ is the subgroup of the automorphism group of $G$ of automorphisms that can be realized as acting on $\Gamma$. Thus, the *cos* of the grip system are elements of the group $N_{S_\Gamma}(G)/G$. This group is a subgroup of $\operatorname{Out}(G)$, and manifests as additional symmetries of the grip system and the complex puzzle created with it. For example, the cube has two cos: the identity and the reflection. The dodecahedron has four: the identity, the reflection, and the co mentioned above and its inverse. That co applied twice is a reflection, so in a way, it can be considered a square root of the reflection.

## Advanced example

Suppose we have 7 grips, labeled `001`, `010`, `011`, `100`, `101`, `110`, and `111`, which are acted on by $GL_3(\mathbb{F}_2)$ in the standard way. This group has order 168. The action of the grip group on the grips can be thought of as the [Fano pane](https://en.wikipedia.org/wiki/Fano_plane): a *line* is a set of 3 grips where one is the XOR-sum of the other two, and the group is all permutations of the grips that map lines to lines. Using this, we can build the complex puzzle and identify its piece types. First, there is clearly the core, with empty active grips, and 7 centers, with only one active grip each (e.g. {`001`}). Then, among the 15 2-grip pieces, there is only one orbit since the action is 2-transitive, so there is only one piece type, for instance that with active grip set {`001`, `010`}. Among 3-grip pieces, there are only two types: those that contain three grips on a line like {`001`, `010`, `011`}, and those that don't, like {`001`, `010`, `100`}. There are 7 of the former piece type and 28 of the latter type. Finally, for 4-, 5-, 6-, and 7- grip pieces, we can use the anti- automorphism to observe that these pieces are exactly the anti- variants of the 0- through 3-grip pieces. Thus, we have classified all the pieces of the complex Fano plane puzzle.

## Extensions to grip theory

### Infinite grips

Consider a set of grips $\mathbb{Z}^2$, whose grip group are the rotations and translations that preserve the lattice. A puzzle constructed like this would have infinitely many twists, and would be unweildy. A way to simplify this puzzle is to restrict the axes that twists are allowed on. Now, a grip that is not under an allowed twist is called *stored*. For instance, if twists are only allowed with axes $(0,0)$ and $(1,0)$, you can make a selection of pieces to make a two-circle puzzle like the [Rashkey](https://twistypuzzles.com/cgi-bin/puzzle.cgi?pkey=1447). However, the complex Rashkey would still have uncountably many pieces, many of which can reach infinitely many attitudes. A solution to this is to only allow pieces with finite active grip sets. If the active grip set of a piece is finite and there are only a finite number of allowed axes, each with finitely many transformations corresponding to a turn, the piece can only reach finitely many attitudes, despite the infinitude of the grip group.

### Bandaging

The 3×3×3 is a doctrinaire puzzle. If a corner {`R`, `U`, `F`} and edge {`R`, `U`} are bandaged together, the puzzle ceases to be doctrinaire. This can be implemented into grip theory by adding a new kind of grip to pieces: *bandaged grips*. Bandaged grips follow the attitude just like active grips. We remove the corner and edge above and replace them with a new piece with active grips {`R`, `U`} and bandaged grips {`F`}. When we apply a twist, if its axis would turn a piece along a bandaged grip, the entire twist is illegal in this state. This exactly mimics the bandaging of the 3×3×3, because by removing `F` from the set of active grips of the corner and the set of inactive grips of the edge, it prevent us from performing any twist that would only move one of the two pieces.

### Jumbling

We can combine these two notions. Consider the [curvy copter](https://twistypuzzles.com/cgi-bin/puzzle.cgi?pkey=1574) (ignore overhang bandaging for now). Clearly, it has at least 12 grips, corresponding to the edges of a cube, with a grip group that contains the rotations of a cube acting on them. However, it should also have jumbling moves, rotations of $\arccos\frac{1}{3}$ around one of the 12 allowed axes. If we take the image of all the grips under repeated application of this type of rotation, we end up with a countably infinite dense set of grips with a countably infinite grip group. Each piece of the curvy copter can be compared with every grip to identify its active and bandaged grips. This produces a description of the curvy copter in grip theory. This description can be simplified so there are only finitely many active and bandaged grips per piece.

### Non-faithful actions

In all previous examples, the action on the grip group has been [faithful](https://groupprops.subwiki.org/wiki/Faithful_group_action). However, this does not have to be the case. Consider the rotational symmetry of the cube, the octahedral group. This group is a quotient of the binary octahedral group of order 48, so the binary octahedral group can act on 6 grips via its quotient. The resulting puzzle has the same pieces as the complex 3×3×3, but each piece can have twice as many additudes, and thus twice as many orientations in a given position. Because the binary octahedral group can be interpreted as a group of spinors, the puzzle with the 3×3×3's pieces but the binary octahedral grip group is the [quaternion cube](https://magmamcfry.github.io/QuaternionCube/).

### RKT rank

As above, the existence of RKT was caused by the existence of a certain stabilizer of two grips. However, not all such stabilizers will enable RKT. On the 3×3×3 grip system, there is a stabilizer of `R` and `L` that can only rotate the anti-middle layer (the intersection of the `R` and `L` layers) and cannot cause the `R` layer to emulate another puzzle. In order for the emulation to work, there must be a twist whose axis is `R` that does not fix `L`. In general, RKT is possible on a puzzle when there are two grips $a$ and $b$ where there is a non-identity element that fixes $a$ and $b$, and a different element that fixes $a$ but moves $b$.

This can be generalized even further. We can define an RKT rank-0 puzzle to be one with no twists, i.e. one where the stabilizer of any grip is the whole group. Then, we proceed recursively: an RKT rank-$(n+1)$ puzzle is one where there is some grip $a$ such that the $a$-stabilizer of the grip group is an RKT rank-$n$ puzzle, after removing grips that are stabilized by every element of the stabilizer. This definition correlates with the geometric rank of a puzzle; the RKT rank of a 3^n^ puzzle is $n-2$ for $n\geq 2$.

TODO THIS NEEDS DEVELOPMENT

### Multiplex Puzzles

Rather than simply assigning pieces a set of active grips, it is possible to create a set of grips combined with endomorphisms of the transforms associated with each grip. This allows for a puzzle like the 3x3x3 where some pieces perform an `R` while others perform `R2` or `R'`. A full *multiplex* puzzle can be built by including a piece for every combination of these grip-endomorphism pairs for a given set of endomorphisms. A simple example is the Triplex Tetrahedron on [this page](https://sonicpineapple.github.io/Complex-Puzzles/Complex.html).

Of particular note are puzzles using automorphisms of the transforms, as these preserve symmetry between different versions of the same grip. These include combination puzzles like [Entangled 3x3x3s](https://www.youtube.com/watch?v=Gfe_ZTWlSYA).

TODO THIS ALSO NEEDS DEVELOPMENT


## Lamination

Lamination is a restriction and generalization of grip theory. It allows fewer types of pieces than are described by grip theory, but the pieces it describes are closer to those of actual puzzles. It has multiple related interpretations.

### Group action interpretation

Suppose, as above, there is a grip group that acts on the set of grips. We now select a block system of this action, and each block is called an *axis*. Now, instead of a piece having a selection of active grips, a piece will have a *layer* on each axis, where a layer is an assignment of a symbol (WLOG element of $\mathbb{Z}$) to each grip in that axis. Then, a twist still has an axis, but now it has a selected layer within that axis, as well as a transformation, an element of the grip group, that pointwise stabilizes the axis. A *laminated* puzzle is one that, given a selection of axes an selection of layers on each axis, contains a piece for every combination of layers. In this way, it is similar to complex puzzles.

For instance, to construct a 3×3×3, first start with the 6 grips `R`, `U`, `F`, `L`, `D`, and `B`. Then, let the axes be `x` = {`R`, `L`}, `y` = {`U`, `D`}, and `z` = {`F`, `B`}. We can choose a set of layers for each axis: the layers of `x` will be the assignments {`R`↦0, `L`↦0}, {`R`↦1, `L`↦0}, and {`R`↦0, `L`↦1}, and similary for `y` and `z`. Since there are 3 layers per axis and 3 axes, the laminated 3×3×3 has $3^3 = 27$ pieces, exactly as many as a 3×3×3. In fact, the laminated 3×3×3 is exactly the super 3×3×3.

### Representation interpretation

Now, we still have a grip group, but instead of acting on a set of grips, it acts linearly on a vector space $V$. The axes are a set of linearly independent subspaces that span $V$ (which implies the $V$ is the direct sum of the axes), and this set should be setwise stabilized by the grip group. A layer is a point in a subspace. A piece as before has one layer per axis, but now, since layers are points in orthogonal subspaces, we can also identify a piece with a point in $V$ whose projections onto the subspaces are its layers. Thus, a twist, being a selection of axis $a$, layer $\lambda$, and transformation $g$, has the effect of selecting all pieces in an affine space passing through $\lambda$ parallel to the direct sum of all axes that are not $a$, and applying $g$ to them.

Constructing the 3×3×3 is even more geometrically intuitive than before. Now, we have three axes `x`, `y`, `z`, which correspond to the three coordinate axes of $\mathbb{R}^3$. The grip group acts on $\mathbb{R}^3$ as the rotational symmetries of the cube, and the layers of `x` will be the surfaces $x=0$, $x=-1$, and $x=1$, and similarly for `y` and `z`. Like this, the 27 pieces of the laminated 3×3×3 form an arrangement just like that of the actual 3×3×3. However, this approach is not limited to 3 dimensions, and can be used to construct all the puzzles of doctrinaire grip theory.

### More layers

Laminated puzzles, as the name suggests, are made of layers, so adding more layers is trivial. Moreover, even-layered puzzles can be constructed as naturally as odd-layered ones. This makes them a more natural description of these puzzles.
